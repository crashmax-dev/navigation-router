(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&r(p)}).observe(document,{childList:!0,subtree:!0});function n(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(s){if(s.ep)return;s.ep=!0;const u=n(s);fetch(s.href,u)}})();function o(t,e,...n){const r=document.createElement(t);return e instanceof Node?r.append(e):typeof e=="string"?r.append(I(e)):Array.isArray(e)?r.append(...e):(Object.assign(r,e),Object.assign(r.style,e?.style)),r.append(...n),r}function I(t){return document.createTextNode(t)}class q{base;constructor(e=""){this.base=e.endsWith("/")&&e!=="/"?e.slice(0,-1):e}getLocation(){const{pathname:e,search:n,hash:r}=window.location;return((e.startsWith(this.base)?e.slice(this.base.length):e)||"/")+n+r}listen(e){const n=window.navigation;if(n){const s=u=>{!u.canIntercept||u.hashChange||u.downloadRequest||u.intercept({handler:async()=>{const p=new URL(u.destination.url),w=p.pathname.startsWith(this.base)?p.pathname.slice(this.base.length):p.pathname;e((w||"/")+p.search+p.hash)}})};return n.addEventListener("navigate",s),()=>n.removeEventListener("navigate",s)}const r=()=>e(this.getLocation());return window.addEventListener("popstate",r),()=>window.removeEventListener("popstate",r)}navigate(e,n){const r=this.createHref(e);window.navigation?window.navigation.navigate(r,{history:n?"replace":"push"}):(n?window.history.replaceState(null,"",r):window.history.pushState(null,"",r),window.dispatchEvent(new PopStateEvent("popstate")))}go(e){window.navigation?e>0?window.navigation.forward():window.navigation.back():window.history.go(e)}createHref(e){return this.base+e}}function O({update:t,notify:e,unwatched:n}){return{link:r,unlink:s,propagate:u,checkDirty:p,shallowPropagate:w};function r(i,l,d){const c=l.depsTail;if(c!==void 0&&c.dep===i)return;const a=c!==void 0?c.nextDep:l.deps;if(a!==void 0&&a.dep===i){a.version=d,l.depsTail=a;return}const f=i.subsTail;if(f!==void 0&&f.version===d&&f.sub===l)return;const h=l.depsTail=i.subsTail={version:d,dep:i,sub:l,prevDep:c,nextDep:a,prevSub:f,nextSub:void 0};a!==void 0&&(a.prevDep=h),c!==void 0?c.nextDep=h:l.deps=h,f!==void 0?f.nextSub=h:i.subs=h}function s(i,l=i.sub){const d=i.dep,c=i.prevDep,a=i.nextDep,f=i.nextSub,h=i.prevSub;return a!==void 0?a.prevDep=c:l.depsTail=c,c!==void 0?c.nextDep=a:l.deps=a,f!==void 0?f.prevSub=h:d.subsTail=h,h!==void 0?h.nextSub=f:(d.subs=f)===void 0&&n(d),a}function u(i){let l=i.nextSub,d;e:do{const c=i.sub;let a=c.flags;if(a&60?a&12?a&4?!(a&48)&&A(i,c)?(c.flags=a|40,a&=1):a=0:c.flags=a&-9|32:a=0:c.flags=a|32,a&2&&e(c),a&1){const f=c.subs;if(f!==void 0){const h=(i=f).nextSub;h!==void 0&&(d={value:l,prev:d},l=h);continue}}if((i=l)!==void 0){l=i.nextSub;continue}for(;d!==void 0;)if(i=d.value,d=d.prev,i!==void 0){l=i.nextSub;continue e}break}while(!0)}function p(i,l){let d,c=0,a=!1;e:do{const f=i.dep,h=f.flags;if(l.flags&16)a=!0;else if((h&17)===17){if(t(f)){const g=f.subs;g.nextSub!==void 0&&w(g),a=!0}}else if((h&33)===33){(i.nextSub!==void 0||i.prevSub!==void 0)&&(d={value:i,prev:d}),i=f.deps,l=f,++c;continue}if(!a){const g=i.nextDep;if(g!==void 0){i=g;continue}}for(;c--;){const g=l.subs,D=g.nextSub!==void 0;if(D?(i=d.value,d=d.prev):i=g,a){if(t(l)){D&&w(g),l=i.sub;continue}a=!1}else l.flags&=-33;l=i.sub;const T=i.nextDep;if(T!==void 0){i=T;continue e}}return a}while(!0)}function w(i){do{const l=i.sub,d=l.flags;(d&48)===32&&(l.flags=d|16,(d&6)===2&&e(l))}while((i=i.nextSub)!==void 0)}function A(i,l){let d=l.depsTail;for(;d!==void 0;){if(d===i)return!0;d=d.prevDep}return!1}}let R=0,v=0,y=0,m;const b=[],{link:N,unlink:k,propagate:H,checkDirty:$,shallowPropagate:V}=O({update(t){return t.depsTail!==void 0?U(t):C(t)},notify(t){let e=y,n=e;do if(b[e++]=t,t.flags&=-3,t=t.subs?.sub,t===void 0||!(t.flags&2))break;while(!0);for(y=e;n<--e;){const r=b[n];b[n++]=b[e],b[e]=r}},unwatched(t){t.flags&1?t.depsTail!==void 0&&(t.depsTail=void 0,t.flags=17,L(t)):M.call(t)}});function P(t){const e=m;return m=t,e}function x(t){return K.bind({currentValue:t,pendingValue:t,subs:void 0,subsTail:void 0,flags:1})}function B(t){const e={fn:t,subs:void 0,subsTail:void 0,deps:void 0,depsTail:void 0,flags:6},n=P(e);n!==void 0&&N(e,n,0);try{e.fn()}finally{m=n,e.flags&=-5}return W.bind(e)}function U(t){++R,t.depsTail=void 0,t.flags=5;const e=P(t);try{const n=t.value;return n!==(t.value=t.getter(n))}finally{m=e,t.flags&=-5,L(t)}}function C(t){return t.flags=1,t.currentValue!==(t.currentValue=t.pendingValue)}function j(t){const e=t.flags;if(e&16||e&32&&$(t.deps,t)){++R,t.depsTail=void 0,t.flags=6;const n=P(t);try{t.fn()}finally{m=n,t.flags&=-5,L(t)}}else t.flags=2}function G(){try{for(;v<y;){const t=b[v];b[v++]=void 0,j(t)}}finally{for(;v<y;){const t=b[v];b[v++]=void 0,t.flags|=10}v=0,y=0}}function K(...t){if(t.length){if(this.pendingValue!==(this.pendingValue=t[0])){this.flags=17;const e=this.subs;e!==void 0&&(H(e),G())}}else{if(this.flags&16&&C(this)){const n=this.subs;n!==void 0&&V(n)}let e=m;for(;e!==void 0;){if(e.flags&3){N(this,e,R);break}e=e.subs?.sub}return this.currentValue}}function W(){M.call(this)}function M(){this.depsTail=void 0,this.flags=0,L(this);const t=this.subs;t!==void 0&&k(t)}function L(t){const e=t.depsTail;let n=e!==void 0?e.nextDep:t.deps;for(;n!==void 0;)n=k(n,t)}function F(t){return t.replace(/:([^/]+)/g,":$1")}class Q{config;adapter;routes=new Map;routesByName=new Map;urlPatterns=new Map;currentRoute=null;currentRouteDisposers=[];navigationLinks=new Map;constructor(e){this.config=e,this.adapter=e.adapter,this.init()}init(){for(const e of this.config.routes){const n=new e;this.routes.set(n.props.path,n),n.props.name&&this.routesByName.set(n.props.name,n);const r=F(n.props.path),s=new URLPattern({pathname:r});this.urlPatterns.set(s,n)}this.renderNavigation(),this.adapter.listen(e=>{this.handleNavigation(e)}),this.handleNavigation(this.adapter.getLocation())}renderNavigation(){const e=this.config.navigationRoot();if(!e){console.warn("[renderNavigation] Navigation container not found");return}e.innerHTML="",this.navigationLinks.clear();for(const n of this.routes.values()){if(n.props.path.includes(":"))continue;const r=this.config.navigationRenderLink(n),s=r instanceof HTMLAnchorElement?r:r.querySelector("a");s&&(s.href=this.adapter.createHref(n.props.path),s.textContent=n.props.label||n.props.name||n.props.path,s.addEventListener("click",u=>{u.ctrlKey||u.metaKey||u.altKey||u.shiftKey||(u.preventDefault(),this.push(n.props.path))}),n.onLinkMouseEnter&&s.addEventListener("mouseenter",u=>{n.onLinkMouseEnter(u)}),n.onLinkMouseLeave&&s.addEventListener("mouseleave",u=>{n.onLinkMouseLeave(u)})),this.navigationLinks.set(n.props.path,s||r),e.appendChild(r)}}async handleNavigation(e){const n=this.config.renderRoot();if(!n){console.warn("[handleNavigation] Root container not found");return}const r=new URL(e,location.origin),s=this.findRoute(r);if(!s){console.warn("[handleNavigation] Route not found:",r);return}const u={query:Object.fromEntries(r.searchParams),params:s.params,router:this};this.currentRoute?.unmount&&this.currentRoute.unmount(),this.currentRouteDisposers.forEach(p=>p()),this.currentRouteDisposers=[],s.route.setup&&await s.route.setup(u),this.currentRouteDisposers.push(B(async()=>{const p=s.route.render(u)??s.route.el;p&&n.replaceChildren(p)})),this.currentRoute=s.route,this.updateActiveLink()}updateActiveLink(){for(const[e,n]of this.navigationLinks.entries())e===this.currentRoute?.props.path?n.classList.add("active"):n.classList.remove("active")}findRoute(e){for(const[n,r]of this.urlPatterns.entries()){const s=n.exec({pathname:e.pathname});if(s)return{route:r,params:s.pathname.groups}}}push(e){this.adapter.navigate(e)}replace(e){this.adapter.navigate(e,!0)}back(){this.adapter.go(-1)}forward(){this.adapter.go(1)}getUnsafe(e){let n;if("name"in e?n=this.routesByName.get(e.name):n=this.routes.get(e.path),!n){console.warn("[getUnsafe] Route not found:",e);return}return n}}function X(t){return new Q(t)}class S{el;props;constructor(e){this.props=e}}class Y extends S{constructor(){super({path:"/about",label:"About"})}render(e){return o("div",[o("h1","About Page"),o("p","This is the about page."),o("pre",`Timestamp: ${e.query.timestamp}`),o("button",{onclick(){e.router.back()}},"Go back")])}}class _ extends S{constructor(){super({path:"/blog/:id"})}render(e){const n=e.params.id;return o("div",[o("h1","Blog Page"),o("p",`Blog ID: ${n}`),o("div",{className:"buttons"},o("button",{onclick(){e.router.back()}},"Go back"),o("button",{onclick(){e.router.push(`/blog/${Number(n)+1}`)}},"Go to next blog"))])}}class z extends S{cursorPointer;constructor(){super({path:"/",label:"Home"}),this.handleClick=this.handleClick.bind(this),this.handleMove=this.handleMove.bind(this)}handleClick(){console.info("Home clicked!")}handleMove(e){this.cursorPointer.textContent=`x: ${e.clientX} y: ${e.clientY}`,console.log("Mouse moved! ðŸŽ‰")}setup(){this.cursorPointer=o("pre","x: 0 y: 0"),document.body.addEventListener("mousemove",this.handleMove)}render(e){return o("div",[o("h1","Home Page"),o("p","Welcome back!"),this.cursorPointer,o("div",{className:"buttons"},o("button",{onclick:this.handleClick},"Click me!"),o("button",{onclick:()=>{e.router.push(`/about?timestamp=${Date.now()}`)}},"Go to About"),o("button",{onclick:()=>{e.router.push("/blog/1")}},"Go to Blog"))])}unmount(){document.body.removeEventListener("mousemove",this.handleMove)}}class J extends S{posts=x([]);loading=x(!1);page=x(1);abortController;constructor(){super({path:"/posts",label:"Posts"})}setup(){this.fetchPosts()}render(){const e=this.posts(),n=this.page(),r=this.loading();return o("div",[o("h1","Posts"),o("div",{className:"buttons"},o("button",{disabled:n===1,onclick:()=>{this.page(n-1),this.fetchPosts()}},"Previous Page"),o("span",`Page: ${n}`),o("button",{disabled:n===10,onclick:()=>{this.page(n+1),this.fetchPosts()}},"Next Page"),r?o("span","Loading..."):"",o("button",{style:{marginLeft:"auto"},onclick:()=>{this.posts([{id:Math.floor(Math.random()*100),userId:1,title:"qui est esse",body:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quas, quia."},...e])}},"Add Post")),o("table",{className:"posts-table"},o("thead",[o("tr",[o("th","ID"),o("th","User ID"),o("th","Title"),o("th","Body")])]),o("tbody",e.map(s=>o("tr",[o("td",String(s.id)),o("td",String(s.userId)),o("td",s.title),o("td",s.body)]))))])}async fetchPosts(){if(!this.loading()){this.abortController=new AbortController,this.loading(!0);try{const e=await fetch(`https://jsonplaceholder.typicode.com/posts?_page=${this.page()}`,{signal:this.abortController.signal});e.ok&&(this.posts(await e.json()),this.abortController=void 0)}finally{this.loading(!1)}}}onLinkMouseEnter(){this.fetchPosts()}unmount(){this.abortController&&(this.abortController.abort(),this.abortController=void 0)}}const E=X({adapter:new q("/navigation-router/"),routes:[z,Y,_,J],renderRoot:()=>document.querySelector("#app"),navigationRoot:()=>document.querySelector("#navigation"),navigationRenderLink:()=>o("a",{className:"link"})});console.log(E);window.$router=E;
